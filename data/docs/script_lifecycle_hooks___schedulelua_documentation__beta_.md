# Script Lifecycle Hooks | ScheduleLua Documentation (Beta)

# Script Lifecycle Hooks [​](#script-lifecycle-hooks) ScheduleLua provides several lifecycle hooks that allow your script to respond to various game events. This guide explains each hook, when it&#39;s called, and how to use it effectively. ## Overview [​](#overview) Lifecycle hooks are functions with specific names that ScheduleLua calls at particular points during script and game execution. By implementing these functions in your script, you can respond to events like script initialization, game updates, player state changes, and more. ## Available Hooks [​](#available-hooks)### Initialize [​](#initialize) lua function Initialize () -- Initialization code here end The Initialize function is called when your script is first loaded. Best Practice: Use this function for: * Setting up initial variables* Registering event listeners* Initializing script state* Performing compatibility checks ### Update [​](#update) lua function Update () -- Code to run every frame end The Update function is called every frame while the game is running. This is where you can implement continuous monitoring and real-time reactions. Best Practice: Because Update runs frequently, you should: * Avoid expensive operations* Use flags or timers to limit how often certain code runs* Focus on critical real-time functionality* Consider using coroutines for delayed operations ### OnConsoleReady [​](#onconsoleready) lua function OnConsoleReady () -- Code to run when console is ready RegisterCommand ( &quot;mycommand&quot; , &quot;Description&quot; , &quot;usage&quot; , function (args) -- Command implementation end ) end The OnConsoleReady function is called when the game console is fully loaded and ready to accept commands. This is the ideal place to register custom console commands. ### OnPlayerReady [​](#onplayerready) lua function OnPlayerReady () -- Code to run when player is loaded local playerPos = GetPlayerPosition () Log ( &quot;Player ready at position: &quot; .. playerPos. x .. &quot;, &quot; .. playerPos. y .. &quot;, &quot; .. playerPos. z ) end The OnPlayerReady function is called when the player character is fully loaded and ready. This is when you can safely access player data, inventory, position, etc. ### OnSceneLoaded [​](#onsceneloaded) lua function OnSceneLoaded (sceneName) Log ( &quot;Scene loaded: &quot; .. sceneName) -- Code to run when a new scene is loaded end The OnSceneLoaded function is called whenever a new scene is loaded. The sceneName parameter provides the name of the loaded scene. ### OnDayChanged [​](#ondaychanged) lua function OnDayChanged (day) Log ( &quot;Day changed to: &quot; .. day) -- Code to run when the game day changes end The OnDayChanged function is called when the game day changes. The day parameter provides the new day value. ### OnTimeChanged [​](#ontimechanged) lua function OnTimeChanged (time) -- Code to run when game time changes -- &#39;time&#39; is provided in game time units if time % 6 == 0 then -- Only log every 6 time units Log ( &quot;Time is now: &quot; .. FormatGameTime (time)) end end The OnTimeChanged function is called when the game time changes. The time parameter provides the new time value. ### OnPlayerHealthChanged [​](#onplayerhealthchanged) lua function OnPlayerHealthChanged (newHealth) Log ( &quot;Player health changed to: &quot; .. newHealth) if newHealth &lt; 30 then -- Provide healing items or warnings end end The OnPlayerHealthChanged function is called when the player&#39;s health changes. The newHealth parameter provides the new health value. ### OnPlayerEnergyChanged [​](#onplayerenergychanged) lua function OnPlayerEnergyChanged (newEnergy) Log ( &quot;Player energy changed to: &quot; .. newEnergy) if newEnergy &lt; 30 then -- Provide energy items or warnings end end The OnPlayerEnergyChanged function is called when the player&#39;s energy changes. The newEnergy parameter provides the new energy value. ### Shutdown [​](#shutdown) lua function Shutdown () -- Cleanup code here UnregisterCommand ( &quot;mycommand&quot; ) Log ( &quot;Script shutdown complete&quot; ) end The Shutdown function is called when your script is being unloaded. It should perform any necessary cleanup like unregistering commands or releasing resources. ## Hook Execution Order [​](#hook-execution-order) When a script is loaded, hooks are called in this order: * Initialize - When script is first loaded* OnConsoleReady - When console is ready* OnPlayerReady - When player is loaded and ready* Update - Called every frame thereafter* Other event hooks - Called when their specific events occur* Shutdown - Called when script is unloaded ## Creating Custom Events [​](#creating-custom-events) In addition to the built-in lifecycle hooks, you can create your own custom events. For example: lua function OnPlayerMovedSignificantly () -- Custom event when player moves a significant distance local currentRegion = GetPlayerRegion () Log ( &quot;Player moved to region: &quot; .. currentRegion) end -- In the Update function, call your custom event when needed function Update () local currentPos = GetPlayerPosition () if playerLastPosition then local distance = Vector3Distance (currentPos, playerLastPosition) if distance &gt; 5 then playerLastPosition = currentPos OnPlayerMovedSignificantly () -- Call custom event end end end ## Best Practices [​](#best-practices) * Implement only the hooks you need* Keep hook implementations efficient, especially for frequently called hooks like Update * Use appropriate hooks for specific tasks* Handle errors gracefully in all hooks* Always implement Shutdown to clean up resources properly* Use custom events to organize your code logically ## Example: Complete Lifecycle Implementation [​](#example-complete-lifecycle-implementation) lua -- Track player state local playerLastPosition = nil local playerLastRegion = nil -- Initialize function function Initialize () Log ( &quot;Script initialized!&quot; ) end -- Update function function Update () local currentPos = GetPlayerPosition () if playerLastPosition then local distance = Vector3Distance (currentPos, playerLastPosition) if distance &gt; 5 then playerLastPosition = currentPos OnPlayerMovedSignificantly () end end end -- Console ready function OnConsoleReady () RegisterCommand ( &quot;pos&quot; , &quot;Shows player position&quot; , &quot;pos&quot; , function (args) local pos = GetPlayerPosition () Log ( &quot;Position: &quot; .. pos. x .. &quot;, &quot; .. pos. y .. &quot;, &quot; .. pos. z ) end ) end -- Player ready function OnPlayerReady () playerLastPosition = GetPlayerPosition () playerLastRegion = GetPlayerRegion () Log ( &quot;Player ready in region: &quot; .. playerLastRegion) end -- Scene loaded function OnSceneLoaded (sceneName) Log ( &quot;Scene loaded: &quot; .. sceneName) end -- Day changed function OnDayChanged (day) Log ( &quot;Day changed to: &quot; .. day) end -- Time changed function OnTimeChanged (time) if time % 3 == 0 then Log ( &quot;Time is now: &quot; .. FormatGameTime (time)) end end -- Custom event function OnPlayerMovedSignificantly () local currentRegion = GetPlayerRegion () if currentRegion ~= playerLastRegion then Log ( &quot;Player changed region from &quot; .. playerLastRegion .. &quot; to &quot; .. currentRegion) playerLastRegion = currentRegion end end -- Shutdown function Shutdown () UnregisterCommand ( &quot;pos&quot; ) Log ( &quot;Script shutdown complete&quot; ) end This guide covers the main lifecycle hooks provided by ScheduleLua. For more specialized hooks related to specific game systems, refer to the relevant API documentation.